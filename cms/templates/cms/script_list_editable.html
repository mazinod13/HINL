{% extends "cms/base.html" %}
{% block title %}Editable Scripts{% endblock %}

{% block content %}
<h2 class="mb-4">Editable Scripts</h2>

<form method="post">
  {% csrf_token %}
  <div class="table-responsive">
    <table class="table table-sm table-bordered align-middle text-center" id="scripts-table">
      <thead class="table-secondary">
        <tr>
          <th>ID</th>
          <th>Symbol</th>
          <th>Script Name</th>
          <th>Sector</th>
          <th>Ltp</th>
          <th>Ltp date</th>
        </tr>
      </thead>
      <tbody>
        {% for s in scripts %}
        <tr>
          <td>{{ s.id }}</td>
          <td>
            <input type="text" name="symbol_{{ s.id }}" value="{{ s.symbol }}" class="form-control form-control-sm">
          </td>
          <td>
            <input type="text" name="script_name_{{ s.id }}" value="{{ s.script_name }}" class="form-control form-control-sm">
          </td>
          <td>
            <input type="text" name="sector_{{ s.id }}" value="{{ s.sector }}" class="form-control form-control-sm">
          </td>
           <td>
            <input type="text" name="ltp_{{ s.id }}" value="{{ s.ltp |default:'#NA' }}" class="form-control form-control-sm">
          </td>
          <td>
          <input type="date"
              name="ltpdate_{{ s.id }}"
              value="{{ s.ltpdate|date:'Y-m-d' }}"
              class="form-control form-control-sm">
          </td>

        </tr>
        {% endfor %}

        <!-- New script row -->
        <tr class="table-success">
          <td>New</td>
          <td><input type="text" name="new_symbol" class="form-control form-control-sm" placeholder="Symbol"></td>
          <td><input type="text" name="new_script_name" class="form-control form-control-sm" placeholder="Script Name"></td>
          <td><input type="text" name="new_sector" class="form-control form-control-sm" placeholder="Sector"></td>
          <td><input type="number" name="new_ltp" class="form-control form-control-sm" placeholder="Ltp"></td>
        </tr>
      </tbody>
    </table>
  </div>

  <form action="{% url 'cms:refresh_scripts' %}" method="post" class="mb-3">
  {% csrf_token %}
  <button class="btn btn-outline-primary">
    ðŸ”„ Refresh scripts from Google Sheet
  </button>
</form>

</form>


{% endblock %}